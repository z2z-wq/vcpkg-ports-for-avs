diff --git a/CMakeLists.txt b/CMakeLists.txt
index 46458c7..8aa6c52 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1,4 +1,4 @@
-cmake_minimum_required(VERSION 3.1)
+cmake_minimum_required(VERSION 3.16)
 
 project(uavs3d)
 
diff --git a/source/CMakeLists.txt b/source/CMakeLists.txt
index b52363e..dc02563 100644
--- a/source/CMakeLists.txt
+++ b/source/CMakeLists.txt
@@ -1,6 +1,8 @@
 
 set(LIBNAME uavs3d)
 
+set(PROJECT_VERSION "${PROJECT_VERSION}" CACHE STRING "Project version")
+
 # check cpu
 if("${CMAKE_SYSTEM_PROCESSOR}" STREQUAL "AMD64" OR
    "${CMAKE_SYSTEM_PROCESSOR}" STREQUAL "x86_64")
@@ -89,59 +91,16 @@ else()
     message("-- compile 8bit")
 endif()
 
-# get version
-set (CONFIG_DIR ${CMAKE_CURRENT_SOURCE_DIR}/..)
-execute_process(COMMAND sh ${CONFIG_DIR}/version.sh ${CONFIG_DIR})
-
-function(extract_version_string version_file version_string_out)
-  file(STRINGS "${version_file}" uavs3d_version REGEX "VERSION_STR")
-  string(REPLACE "#define VERSION_STR " "" uavs3d_version "${uavs3d_version}")
-  string(REPLACE "\"" "" uavs3d_version "${uavs3d_version}")
-  string(REPLACE " " "" uavs3d_version "${uavs3d_version}")
-  set("${version_string_out}" "${uavs3d_version}" PARENT_SCOPE)
-endfunction()
-
-extract_version_string("${CONFIG_DIR}/version.h" uavs3d_version)
-MESSAGE(STATUS "uavs3d version \t\t: ${uavs3d_version}")
-
-MESSAGE(STATUS "Target CPU\t\t\t: ${UAVS3D_TARGET_CPU}")
-# pkg-config
-find_package(Threads REQUIRED)
-set(prefix "${CMAKE_INSTALL_PREFIX}")
-set(includedir "include")
-set(libdir "lib")
-set(pc_file "${CONFIG_DIR}/${LIBNAME}.pc")
-
-set(CMAKE_INSTALL_INCLUDE_DIR "${CMAKE_INSTALL_PREFIX}/${includedir}")
-set(CMAKE_INSTALL_LIB_DIR "${CMAKE_INSTALL_PREFIX}/${libdir}")
-set(CMAKE_INSTALL_PKGCONFIG_DIR "${CMAKE_INSTALL_LIB_DIR}/pkgconfig")
-MESSAGE(STATUS "INSTALL_INCLUDE_DIR \t\t: ${CMAKE_INSTALL_INCLUDE_DIR}")
-MESSAGE(STATUS "INSTALL_LIB_DIR \t\t: ${CMAKE_INSTALL_LIB_DIR}")
-MESSAGE(STATUS "INSTALL_PKGCONFIG_DIR\t: ${CMAKE_INSTALL_PKGCONFIG_DIR}")
-# write pkg-config file
-file(WRITE "${pc_file}" "prefix=${prefix}\n")
-file(APPEND "${pc_file}" "exec_prefix=\${prefix}\n")
-file(APPEND "${pc_file}" "includedir=\${prefix}/${includedir}\n")
-file(APPEND "${pc_file}" "libdir=\${exec_prefix}/${libdir}\n\n")
-file(APPEND "${pc_file}" "Name: ${LIBNAME}\n")
-file(APPEND "${pc_file}" "Description: AVS3 decoder library \n")
-file(APPEND "${pc_file}" "Version: ${uavs3d_version}\n")
-if(CMAKE_USE_PTHREADS_INIT)
-  file(APPEND "${pc_file}" "Libs: -L\${libdir} -l${LIBNAME} -lm -lpthread\n")
-else()
-  file(APPEND "${pc_file}" "Libs: -L\${libdir} -l${LIBNAME} -lm\n")
-file(APPEND "${pc_file}" "Libs.private: \n")
-endif()
-file(APPEND "${pc_file}" "Cflags: -I\${includedir}\n")
 
-# set library
-if(BUILD_SHARED_LIBS)
-MESSAGE(STATUS "BUILD_SHARED_LIBS \t\t: true")
-else()
-MESSAGE(STATUS "BUILD_SHARED_LIBS \t\t: false")
-endif()
+
+file(GLOB_RECURSE UAVS3D_HEADERS
+   decoder/uavs3d.h
+)
+
 add_library(${LIBNAME} ${DIR_UAVS3D_SRC} ${UAVS3D_ASM_FILES})
 
+target_compile_definitions(${LIBNAME} PRIVATE UAVS3D_EXPORTS)
+
 if (NOT MSVC)
     target_link_libraries(${LIBNAME} m)
 endif()
@@ -149,7 +108,31 @@ if(CMAKE_USE_PTHREADS_INIT)
 target_link_libraries(${LIBNAME} pthread)
 endif()
 
-# install
-install(TARGETS uavs3d LIBRARY DESTINATION ${CMAKE_INSTALL_LIB_DIR} ARCHIVE DESTINATION ${CMAKE_INSTALL_LIB_DIR})
-install(FILES decoder/uavs3d.h DESTINATION ${CMAKE_INSTALL_INCLUDE_DIR})
-install(FILES ${CONFIG_DIR}/${LIBNAME}.pc DESTINATION ${CMAKE_INSTALL_PKGCONFIG_DIR})
+configure_file(
+    ${CMAKE_SOURCE_DIR}/uavs3d.pc.in
+    ${CMAKE_CURRENT_BINARY_DIR}/uavs3d.pc
+    @ONLY
+)
+
+install(TARGETS uavs3d
+    EXPORT uavs3d-targets
+    LIBRARY DESTINATION lib
+    ARCHIVE DESTINATION lib
+    RUNTIME DESTINATION bin
+)
+
+install(FILES ${UAVS3D_HEADERS}
+    DESTINATION include/uavs3d
+)
+
+install(EXPORT uavs3d-targets
+    FILE uavs3d-config.cmake
+    DESTINATION share/uavs3d
+)
+
+install(
+    FILES ${CMAKE_CURRENT_BINARY_DIR}/uavs3d.pc
+    DESTINATION lib/pkgconfig
+)
+
+
diff --git a/version.sh b/version.sh
index 034d454..2edd36e 100755
--- a/version.sh
+++ b/version.sh
@@ -15,9 +15,9 @@ else
     shell_dir=$1
 fi
 
-VER_R=`git rev-list origin/master | sort | wc -l | awk '{print $1}'`
-VER_L=`git rev-list HEAD | sort | wc -l | awk '{print $1}'`
-VER_SHA1=`git log -n 1 | head -n 1 | cut -d ' ' -f 2`
+VER_R=86
+VER_L=86
+VER_SHA1=1fd04917cff50fac72ae23e45f82ca6fd9130bd8
 
 major_version="1"
 minor_version="2"
